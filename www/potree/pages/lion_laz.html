<html>
<head>
	<meta charset="utf-8"/>
	<title>Potree Viewer</title>
	<!--<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">-->
	<link rel="stylesheet" type="text/css" href="css/potree.css">
</head>
<body>

	<script src="../libs/three.js/build/three.js"></script>
	<script src="../libs/other/stats.min.js"></script>
	<script src="../libs/other/dat.gui.min.js"></script>
	<script src="../libs/other/BinaryHeap.js"></script>
	<script src="../libs/tween/tween.min.js"></script>
	
	<script src="../build/potree/potree.js"></script>
	<script src="./js/viewer.js"></script>
	<script src="./js/ProgressBar.js"></script>
	
	
	<!-- INCLUDE ADDITIONAL DEPENDENCIES HERE -->
	<script src="./lion_laz.js"></script>
	
	<div id="renderArea" style="position: absolute; width: 100%; height: 100%; overflow: hidden;">

		<!-- HEADING -->
		<div class="info" style="position: absolute; left: 300px; right: 300px; top: 10px; text-align: center;">
			<a href="http://potree.org" target="_blank">potree.org</a>
		</div>
	</div>
	
	<script type="module">
		
		// var onPointCloudLoaded = function(event){
		// 	// do stuff here that should be executed once the point cloud has been loaded.
		// 	// event.pointcloud returns the point cloud object
			
		// };
	
		// viewer = new Potree.Viewer(document.getElementById("renderArea"), sceneProperties, {
		// 	"onPointCloudLoaded": onPointCloudLoaded
		// });


  import * as THREE from "../libs/three.js/build/three.module.js";
	
  window.viewer = new Potree.Viewer(document.getElementById("renderArea"));
  
  viewer.setEDLEnabled(true);
  viewer.setFOV(60);
  viewer.setPointBudget(1_000_000);
  viewer.loadSettingsFromURL();
  
  viewer.setDescription("Loading LAZ compressed octree format");
  
  viewer.loadGUI(() => {
    viewer.setLanguage('en');
    $("#menu_appearance").next().show();
    //viewer.toggleSidebar();
  });
  
  Potree.loadPointCloud("./pointclouds/lion_takanawa_laz/cloud.js", "lion", function(e){
    viewer.scene.addPointCloud(e.pointcloud);
    
    let material = e.pointcloud.material;
    material.size = 1;
    material.pointSizeType = Potree.PointSizeType.ADAPTIVE;
    
    e.pointcloud.position.x += 3;
    e.pointcloud.position.y -= 3;
    e.pointcloud.position.z += 4;
    
    viewer.fitToScreen();
  });
		
	</script>
	
</body>
</html>
